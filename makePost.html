<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <body>

  <p>Trust Social Network - Make a post</p>

  <img src="testImage.jpg" id="testImage" alt="A picture of a beach" height="128" width="128">
  
  <canvas id="canvas" width="128" height="128"></canvas>


  <form action="makePost.php" method="POST">

      Your post: <br>
        <textarea name="postText" id="postText" rows="10" cols="30"></textarea><br><br>

		 
		<input type="submit" value="Submit" name="submit">

        <input type="hidden" id="alteredImageData" name="alteredImageData" />

  </form>

  <button onclick="encode()">Encode</button> 

  <script>

    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    var image = document.getElementById("testImage");

    var usersPost = document.getElementById("postText").value;

    window.onload = function()
    {
        context.drawImage(image, 0, 0);
    }

    function encode()
	{
		usersPost = "Users message has now been encoded";

		document.getElementById("postText").value = usersPost;

		var imgData = context.getImageData(0, 0, 128, 128);

		var i;
        for (i = 0; i < imgData.data.length; i += 3)
		{
			imgData.data[i] = 200;
		}
		context.putImageData(imgData, 0, 0);

		document.getElementById("alteredImageData").value = imgData.data;
    }
  </script>

</body>
</html>